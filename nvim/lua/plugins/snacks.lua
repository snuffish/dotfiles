local avatar = [[
```````````````````````````````````````````````````````````````NXK0Okxdolc::::::cclox0X```````````````````````````````````````````````````````````````
``````````````````````````````````````````````````````````WX0kdlc::;;;,''''''''''..',;cdk0XW``````````````````````````````````````````````````````````
`````````````````````````````````````````````````````WN0kdl:;,',,,,,,,,''',,,,,,,,'.''.''':oxOXW``````````````````````````````````````````````````````
`````````````````````````````````````````````````WX0koc;,'',,,,,,,,'',,,,,,'','',,'''.......',:okXW```````````````````````````````````````````````````
`````````````````````````````````````````````WX0xo:;,,''''',,,,,,'''',,,,,,'''''''.'..    ...'',,:xN``````````WNX0k0W`````````````````````````````````
``````````````````````````````````````````WXko;,,,''',,'.'',,,',,,''',,',,,,,''''...        .....',dXWN0kx0NNXKKx' .xW````````````````````````````````
````````````````````````````````````````NOo:,,,',''''',,,,,''''',,,,,,,,;:,',,,'...          .....,;lo:,':d0XNWWNx'.cX````````````````````````````````
`````````````````````````````````````WXkl,',,,,,,,'..',,,,,,'..',,,,,,,,;;,,,,,''..           ..'....';lkKWWWWWWWKd::0````````````````````````````````
```````````````````````````````````WXxc,'',,,''',,,'',,'''',,'',,,''',,,,,,,,''.''.           .,cc.'lkXWWWWWWWWWNkoc;kXKXXNW``````````````````````````
`````````````````````````````````WKd;'',,,,,''.'',,,,,''..',,,,,,'''',,,,,,,'''...          .;d0N0l:dKNWWWWWWWWW0odc,lddoolclkN```````````````````````
```````````````````````````````WXd,..',,',,,''.',,,',,,'..',,,',,'''',,'',,,,''''..  ....';oOXWWWWXo;oKWWWWWWWWXxxkxKWNNNKOdc,:0W`````````````````````
``````````````````````````````WOc;;,,,,''''',,'','''''','','''''',,,,,''..'',,,,,,'....':xKWWWWWWWWN0ccOKOOXNXOdx0ddxONWNN0l:c.;X`````````````````````
`````````````````````````````Nd;;:;,,,,,'.',,,,,,''..',,,,,,'''''''......,;:::,'...''.,kXWWWWWWWWWWWWk,..',,;,'oK0olxXWNNKOo....k`````````````````````
````````````````````````````No,,,,,,',,,''',,''',,,''',,'',''.......',;;;,,,'''. .oKO,.:kNWWWWWWWWWWWWXkdk0klckNWXO0NNNXKOxxo'  oW````````````````````
```````````````````````````Nd.,:,'''''',,,,,''''',,,,,''.......',,;;;,'.',clok0d''kWXo. ;KWWWWWWWWWWWWWWWWWWNNWWWNNNNXKOkxxxxl. ;K````````````````````
```````````````````````````K;.,:,,''.',;,',,''.',,,'''.....',,;;,'.....;kXWWWWWNKxONWXd..o0XXNWWWWWWWWWWWWWWWWNNNNNNNXK0kxxxxd, .xW```````````````````
```````````````````````````0, 'c;,,,,,,''''',''''......',,,,'...';:;.  .cKWWWWWWWXXXkoc'..,;:coxk0NWWWWWWWWWNNNNNNNNNNNNXOxxoc'..;OW``````````````````
```````````````````````````0:.,;;;;;;,,''..''''..''''''....';cdOKNNNOl,..;0WWWWWWKd;''''''',''''',coxk0XNNWNNNNNNNNNNNNNNXOc,''''',l0W````````````````
``````````````````````````Nkc;,,,,,,,'''....'''','.....,;lOKNKKNWWWWWNXk;.dNNWWXx;.......''''''''''''',;:clokKNNNNNNK0XNNXd'........,kW```````````````
`````````````````````````WO,...';,'.....'''......,:c' 'dodXWWk:oKWWWWWWWXlcxKW0:...,,;,,'......'''''''''''''':kNNNNNKOkk00c..        .l0W`````````````
``````````````````````````Xd,..';,'..'','...':c'.xNWk:,;;lKWWk. ,ldONWWWWKocxXkldOKXNNNNX0koc'.....''''''''''.;0NNNNNNXOol;. .,lxxd:..,xN`````````````
``````````````````````WNXKOxc;;,,'.......  ,ONWx;dNWNXKk;'xNWXo.   .lKWWWWNKKXWWWWWWWWWWWWWWWXkl,.  ......... .kNNNNNNNNKo,,cxKXNWWN0ccK``````````````
``````````````````WN0xoc:;,,'''....  .,,.  .dNWNOONWWWWWKodKWWNO;.  .;0NWWWWWXXNWWWWWWWWWWWWWWWWXOl,.        .c0NNNNNNNNX0l,dXXNWWWWWKldN`````````````
``````````````WNKOdc,'',''....    .cdxxdc,. 'kWWNXXWWWWWWNXXNWWWKl.   ,xXWWWO;.,;:clodkOKXXNNWWWWWWX0dl::::cokXNNNNNNNNNX0k:;kXWWWWWWWOcdXW```````````
```````````WKOdl;,''......       ;OWWWWWNXOd::dOKNWWWWWWWWWWWWWWWNO:.  .:0NWk.        ....',;clodxO0KXNNWWWWWXXNNNNNNNXOxo:,;dXWNNKOxl,.'kW```````````
```````WXOxl:,'''.....          ,0WWWWWNXXXXKOddddONWXXNWNNWWWWWWWWXo,.  .col'   ..;ool,. ...... ....',;cclol,,dXNNNNNKko:,'';::;,.....:OW````````````
````WXOdc;,''....               lNWWXOolllcllodONXXNWXOxo:;o0NWWWWWWNXOl,..      .,xNX0l..,:::;,'''...,lxc.    lXNNNX0kkkxdoc:,..',;ccxNW`````````````
``W0d:,'....                   .xWWXkl;lxkOOOOxod0XKNWWKxc...;lodxx0XWWWX0kxd:,. ..oXWNO:,cllcc:;;,,;ldxx:   .;ONNNNXKXNNNXKOkxl:cl:;;lxOKNW``````````
WKo,...                        .dNWNKoo0XNNKxdk0dloccdKNWWKl..,::'..,lONWWWWWNXKkc',oXWNOoodddolc:;,;lo:.  .ccdXNNNNNXKXNXxc:cldxxxxoc,.',:o0W````````
K:..       ....    .   .........lXWW0oONNNX0Od;;l:'.  ,xXWWXl..dXXOd;..:kXWWWWWWWN0dclxKXk:,;:cccloc,,,.  'xxokKXNKO0K0KX0c''.....',,'''....;OW```````
Xl..    ..............',;;:lodkkokWWKdkNNNNNKdlk0o,;.  .;xXWXx''xNWWN0d,.:0NWWWWWWWWXkodkko:'..',;:,..   ;Ox:ldkOKKk0NNX0KO:.    ..',;,....,dX````````
`N0kdolccccclooddodxkO0KXNNW````0okNNxoKNNNNOodOKx;dOc.  .,dKNO;.:kXNNNO, 'cxXNXNWWWWNK0kdc;,,:cloooll:,.':codOXKkOXNNX0KNN0c...',,',,'',':0W`````````
```````WWWWW`````````````````````KxdO0odXNNN0oxkO0o:kXO:.  .;kXXkc,,;;:cc,'':0NK0KNWWWNKx:;lkKXXXNNNNNNXKOkkkkO00xxXX00KXNNNKxddxkO00x:ll,lXWNXXXNW```
``````````````````````````````````Nx;lxdd0XNXkkKOkkdoxKXkc. .'oKWNKkoccccc,...:xkxooxkd;,o0XXNNNNNNNNNNNNNNNXKKKK0KNXO0NXKKNNNNNNNNNNOcoOl,oKK000OxxK`
```````````````````````````````````Xdc:lxddOXNXNNXKKK00XNNk,. .'ckKWWWWNKkl:;,,codddxxc:kKKOkxxxxxkkk0XNNNNNN00XXO0NNNNNXOOXNNNNNNNNNx:kNKOKNNNNNNKccK
```````````````````````````````````Wd:c;:dkdoxOXKkxxxddxxkKKx;,'..,xXKkdodkOOKXXNNNNNN0dollcodxkkkkxdodkKNNNNK0XNNNNNNNNNNNNNNNNNNNN0clKNNXK00XXXXXx;x
````````````````````````````````````x...,,oKKO0kdkKXNNNNXklkWNXKd' .:ld0XNNNNNNNNXXXOl;';coolox0XNNXXK0OKNNNNNNNNNNNNNNNNNNNNNNNNNNXl:kXXOkxc';lkKXx;x
````````````````````````````````````0;.....;0NKkKWWWWWWWWWkc0WNNNk'.oKNNNNNNNNNXkxko:ok0XXNX0xollkXNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNXd:xXNXKXXo;odd0Ko;O
````````````````````````````````````Xc:do:. ,kXXWNK0KNWWNNx;kWNN0l:kXXNNNNNNNNNxclldKNNNNNNNNNNKxlldOXNNNNNNNNNNNNNNNNNNNNNNNNNNNXo:dKNNNNXx:dKNXXOclX
````````````````````````````````````Xc;k00kc.'xNNOc;ckNX0k;'d0XOl:kKKXNNNNNNNNKl:x0NNNNNNNNNNNNNNX0dclx0NNNNNNNNNNNNNNNNNNNNNNNN0lcxKNNNXkl:dKXNXOlc0`
````````````````````````````````````Nd,;cdO0x;'lOOo::dxl,.  .'ll;o00KXXNNNNNNNXOOXNNNNNNNNNNNNNNNNNNKkolox0XNNNNNNNNNNNNNNNNNNXkclOXNXKxc:oOXXX0dcoKW`
`````````````````````````````````````WOlcollodo;,:cclc:,''..   .'dO00KKXXNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNKdccloxOKXNNNNNNNNNNNXOc,lO0Odc,':xKXKkolokN```
``````````````````````````````````````WNN`WKkoclol::ok0KKX0l.   .dOO000KKXXXNNNNNNNNNNNNNNNNNNNNNNNNNNNNKOdc:clllloodddddddl;',;c:;:llodl::lllxKW`````
`````````````````````````````````````````````WXxllcco0NNXXNKo'. .ckOO0000KKKKXXXXNNNNNNNNNNNNXXXXXNNNNNNNNXkollodddoolllllll::ddodld0OdolldkKN````````
````````````````````````````````````````````````XocclkNN0xk0kdlc;;lkkOO000000KKKKXXXXXXXXXKKKKKKKKKXXXNNNNNNX0kooloodxxxxdoc;:cokKk::ldOKW````````````
`````````````````````````````````````````````````KdodOXNN0oc:clll;';okOOOO000000000KKKKKKK0000Odc::ldOKKXNNNNNXXK0kdoolll:,;coclxxxc:0W```````````````
```````````````````````````````````````````````WXx::ccclll:..';:cllc;:codkkOOOO000000000OOOxo:'.     'cx0KXNNNNNNNNNXXX0ocxkOkc:odkkcoOOkOX```````````
```````````````````````````````````````````WKOkkkkkkxdoc,....:dddddddoc,..',,:clloooolc:;,..         'oxdO0KXNNNNNNNNNNKk0K0x:',:lodo:lkOOX```````````
```````````````````````````````````````````KddOK0OkkO0KKOl;...':odddddxd;.                          .xWW0ddk0KKXXNNNNNNXK0Oxl:dKKd:oOol0W`````````````
``````````````````````````````````````````WOd0N0xkkxxdONXkc'....:dxddxdddc.                         cX```XxlldkO0000000kxoc:ckN``NxlodllOXW```````````
``````````````````````````````````````````WOx0Xkx0dlooxKXkl;,....,cxkxxddxo:'                      'O`````WXkollllllccccclx0NW```WOclkOd;;loxxkKW`````
``````````````````````````````````````````WOoxK0kkkxxxk00xx0d;:odc,;okkxxxxxd:.                   .dW````````WNK0OkxkOKXWW````````Xc.;:'.;,':ld0W`````
```````````````````````````````````````````XdcdOOOkkkkOkdxXWkcxKXXKkodO0kxxxxxl.                  :K``````````````````````````````Xc..:c:c:,:0W```````
````````````````````````````````````````````N0dlccllloodkXWKc;xXNNNWNXXNX0kkxxxo'                .dW``````````````````````````````Kc',cc;,'..lX```````
``````````````````````````````````````````````WX0OkkO0KNWNk:',codddodxkkOKXKKOxxo'               ,0```````````````````````````````Xl..,;::lxOKW```````
`````````````````````````````````````````````````````````Kc';;;:c;',,,'',,codk0Oxo'              oN```````````````````````````````WKxokKXNW```````````
`````````````````````````````````````````````````````````0:.',':dl,,:;;;;,,,',ck0ko;..          .O````````````````````````````````````````````````````
`````````````````````````````````````````````````WW```NKOo,..'''''';;;;;;;:l:'.oXKOxdl:;,..     ;K````````````````````````````````````````````````````
]]

return {
  {
    "MaximilianLloyd/ascii.nvim",
    requires = { "MunifTanjim/nui.nvim" },
  },
  {
    "folke/snacks.nvim",
    opts = {
      scroll = {
        enabled = false,
      },
      zen = {
        win = {
          width = 0.8,
          backdrop = { transparent = false, blend = 95 },
          wo = { winhighlight = "NormalFloat:Normal" },
        },
        on_open = function(win)
          require("snacks.indent").disable()
          -- vim.cmd("normal! zM")
          _G.ZenMode = { enabled = true }
        end,
        on_close = function(win)
          require("snacks.indent").enable()
          _G.ZenMode = { enabled = false }
        end,
      },
      dashboard = {
        preset = {
          header = [[
 ██╗      █████╗ ███████╗██╗   ██╗██╗   ██╗██╗███╗   ███╗          Z
 ██║     ██╔══██╗╚══███╔╝╚██╗ ██╔╝██║   ██║██║████╗ ████║      Z    
 ██║     ███████║  ███╔╝  ╚████╔╝ ██║   ██║██║██╔████╔██║   z       
 ██║     ██╔══██║ ███╔╝    ╚██╔╝  ╚██╗ ██╔╝██║██║╚██╔╝██║ z         
 ███████╗██║  ██║███████╗   ██║    ╚████╔╝ ██║██║ ╚═╝ ██║           
 ╚══════╝╚═╝  ╚═╝╚══════╝   ╚═╝     ╚═══╝  ╚═╝╚═╝     ╚═╝           
]],

          keys = {
            { icon = " ", key = "f", desc = "Find File", action = ":lua Snacks.dashboard.pick('files')" },
            { icon = " ", key = "n", desc = "New File", action = ":ene | startinsert" },
            { icon = " ", key = "G", desc = "Find Text", action = ":lua Snacks.dashboard.pick('live_grep')" },
            { icon = " ", key = "r", desc = "Recent Files", action = ":lua Snacks.dashboard.pick('oldfiles')" },
            {
              icon = " ",
              key = "c",
              desc = "Config",
              action = ":lua Snacks.dashboard.pick('files', {cwd = vim.fn.stdpath('config')})",
            },
            { icon = " ", key = "s", desc = "Restore Session", section = "session" },
            { icon = " ", key = "x", desc = "Lazy Extras", action = ":LazyExtras" },
            { icon = "󰊢 ", key = "g", desc = "LazyGit", action = ":LazyGit" },
            { icon = "󰒲 ", key = "l", desc = "Lazy", action = ":Lazy" },
            { icon = "󱌢 ", key = "m", desc = "Mason", action = ":Mason" },
            { icon = " ", key = "h", desc = "Checkhealth (which-key)", action = ":checkhealth which-key" },
            { icon = " ", key = "H", desc = "Checkhealth", action = ":checkhealth" },
            { icon = " ", key = "q", desc = "Quit", action = ":qa" },
          },
        },
        sections = {
          {
            section = "terminal",
            cmd = "chafa ~/.config/nvim/avatar.png --format ansi --size 65x50; sleep .1",
            pane = 2,
            indent = 4,
            width = 65,
            height = 50,
          },
          {
            { section = "header" },
            { section = "keys", gap = 1, padding = 1 },
            { section = "startup" },
          },
        },
      },
    },
    keys = {
      {
        "<localleader>z",
        function()
          vim.utils.trigger_keys("<leader>uz")
        end,
        desc = "Toggle 'Zen Mode'",
      },
      {
        "<localleader>Z",
        function()
          vim.utils.trigger_keys("<leader>uZ")
        end,
        desc = "Toggle 'Zoom Mode'",
      }
    },
    config = function(_, opts)
      require("snacks").setup(opts)
    end,
  },
}
